services:
  website:
    build: .
    container_name: website
    restart: unless-stopped
    ports:
      - "8080:3000"
    environment:
      SITE_REPO: "https://github.com/camwolff02/website-infra.git"
      SITE_BRANCH: "main"
      POLL_SECONDS: "60"
      # If your static files live in a subfolder (React/Vite output), set one:
      # SERVE_SUBDIR: "dist"
      LISTEN_PORT: "3000"
    volumes:
      # Persist the git clone so restarts are fast and updates are incremental
      - website_repo:/site

volumes:
  website_repo:
